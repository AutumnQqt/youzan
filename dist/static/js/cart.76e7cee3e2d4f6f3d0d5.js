webpackJsonp([6],{"0C+S":function(t,e){},NW8W:function(t,e){},TFhR:function(t,e,i){"use strict";var s={hotLists:"index/hotLists",banner:"index/banner",topLists:"category/topList",rankLists:"category/rank",subLists:"category/subList",searchLists:"search/list",goods:"goods/details",cartLists:"cart/list",cartAdd:"cart/add",cartReduce:"cart/reduce",cartMrremove:"cart/mrremove",cartRemove:"cart/remove",addressList:"address/list",addressAdd:"address/add",addressRemove:"address/remove",addressUpdate:"address/update",addressSetDefault:"address/setDefault"};for(var n in s)s[n]="http://yapi.demo.qunar.com/mock/69353/"+s[n];e.a=s},eC21:function(t,e){},gWPi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("NW8W"),i("0C+S"),i("eC21");var s=i("7+uW"),n=i("9qgI"),o=i.n(n),c=i("Zrlr"),r=i.n(c),d=i("wxAW"),a=i.n(d),h=i("wI4f"),u=i("TFhR"),f=i("mw3O"),v=i.n(f),l=function(){function t(){r()(this,t)}return a()(t,null,[{key:"getList",value:function(){return Object(h.a)(u.a.cartLists)}},{key:"add",value:function(t){return Object(h.a)(u.a.cartAdd,v.a.stringify({id:t,number:1}))}},{key:"reduce",value:function(t){return Object(h.a)(u.a.cartReduce,v.a.stringify({id:t,number:-1}))}},{key:"remove",value:function(t){return Object(h.a)(u.a.cartRemove,v.a.stringify({id:t}))}},{key:"mrremove",value:function(t){return Object(h.a)(u.a.cartMrremove,v.a.stringify(t))}}]),t}();e.default=new s.default({el:"#app",data:{cartLists:null,edited:!1,editedShop:null,editedIndex:-1,removePopup:!1,touchStartX:0,touchIndex:-1,left:"0px"},created:function(){this.getCartLists()},computed:{allcheck:{get:function(){return!(!this.cartLists||!this.cartLists.length)&&this.cartLists.every(function(t){return t.checked})},set:function(t){this.cartLists.forEach(function(e){e.checked=t,e.goodsList.forEach(function(e){e.checked=t})})}},checkLists:function(){var t=[];return this.cartLists&&this.cartLists.length&&this.cartLists.forEach(function(e){e.goodsList.forEach(function(e){e.checked&&t.push(e)})}),t},removeLists:{get:function(){var t=[];return this.cartLists&&this.cartLists.length&&this.cartLists.forEach(function(e){e.goodsList.forEach(function(e){e.removed&&t.push(e)})}),t},set:function(){}},getTotal:function(){var t=0;return this.selectLists&&this.selectLists.length&&this.selectLists.forEach(function(e){t+=e.price*e.number}),t},removeMsg:function(){return this.removeLists.length>1?"确定将所选 "+this.removeLists.length+" 个商品删除？":"确定要删除该商品吗？"}},methods:{getCartLists:function(){var t=this;l.getList().then(function(e){var i=e.data.cartList;i.forEach(function(t){t.checked=!1,t.edited=!1,t.editMsg="编辑",t.removed=!1,t.goodsList.forEach(function(t){t.checked=!1,t.removed=!1})}),t.cartLists=i})},handleEdit:function(t,e){this.editedShop=t,this.editedIndex=e,t.edited=!t.edited,this.edited=!this.edited,this.cartLists.forEach(function(e){e.editMsg=t.edited?"":"编辑",t.editMsg=t.edited?"完成":"编辑",t.removed=!1,e.goodsList.forEach(function(t){t.removed=!1})})},goodsChecked:function(t,e){t.checked=!t.checked,!0===e.checked?e.checked=!1:(e.checked=!0,e.goodsList.forEach(function(t){!1===t.checked&&(e.checked=!1)}))},shopsChecked:function(t){t.checked=!t.checked,t.goodsList.forEach(function(e){e.checked=t.checked})},allChecked:function(){this.allcheck=!this.allcheck},goodsRemoved:function(t,e){t.removed=!t.removed;var i=e.goodsList.every(function(t){return t.removed});e.removed=!!i},shopsRemoved:function(t){t.removed=!t.removed,t.goodsList.forEach(function(e){e.removed=t.removed})},reduce:function(t){l.reduce(t.id).then(function(e){t.number-=1,t.number<=1&&(t.number=1)}).catch(function(t){console.log(t)})},add:function(t){l.add(t.id).then(function(e){t.number+=1}).catch(function(t){console.log(t)})},removeHandle:function(){this.removePopup=!0},removeConfirm:function(){var t=this;if(1===this.removeLists.length)l.remove(this.removeLists[0].id).then(function(e){t.remove()});else{var e=[];this.removeLists.forEach(function(t){e.push(t.id)}),l.mrremove(e).then(function(e){t.remove()}).catch(function(t){console.log(t)})}o()(document.querySelectorAll(".touch"),{marginLeft:"0px"},{duration:0})},remove:function(){var t=[];this.editedShop.goodsList.forEach(function(e){e.removed||t.push(e)}),this.editedShop.goodsList=t,t.length||this.cartLists.splice(this.editedIndex,1),this.edited=!1,this.editedShop.edited=!1,this.removePopup=!1,this.cartLists.forEach(function(t){t.editMsg="编辑"})},startTouch:function(t,e,i){this.touchIndex=-1,this.touchStartX=t.changedTouches[0].clientX;for(var s=0;s<i;s++)this.touchIndex+=this.cartLists[s].goodsList.length;for(var n=0;n<=e;n++)this.touchIndex++},endTouch:function(t){var e=this.touchStartX-t.changedTouches[0].clientX;e>30?this.left="-75px":e<-30&&(this.left="0px"),o()(document.querySelectorAll(".touch")[this.touchIndex],{marginLeft:this.left},{duration:700,easing:"swing"})},removeSelf:function(t,e,i,s){this.removeLists.push(i),this.editedShop=t,this.editedIndex=e,i.removed=!0,this.removeHandle()}}})},wI4f:function(t,e,i){"use strict";var s=i("//Fk"),n=i.n(s),o=(i("7+uW"),i("mtWM")),c=i.n(o);e.a=function(t,e){return new n.a(function(i,s){c.a.post(t,e).then(function(t){var e=t.status;200===e?i(t):300===e&&(location.href="index.html")}).catch(function(t){s(t)})})}}},["gWPi"]);
//# sourceMappingURL=cart.76e7cee3e2d4f6f3d0d5.js.map