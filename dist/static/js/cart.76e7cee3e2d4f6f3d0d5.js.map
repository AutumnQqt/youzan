{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/cartService.js","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js"],"names":["url","hotLists","banner","topLists","rankLists","subLists","searchLists","goods","cartLists","cartAdd","cartReduce","cartMrremove","cartRemove","addressList","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","Cart","fetch","id","qs","stringify","number","ids","__webpack_exports__","Vue","el","data","edited","editedShop","editedIndex","removePopup","touchStartX","touchIndex","left","created","this","getCartLists","computed","allcheck","get","length","every","shop","checked","set","newVal","forEach","goodsList","good","checkLists","arr","push","removeLists","removed","getTotal","total","selectLists","price","removeMsg","methods","_this","getList","then","res","list","cartList","editMsg","handleEdit","shops","shopIndex","goodsChecked","shopsChecked","allChecked","goodsRemoved","allRemoved","shopsRemoved","reduce","catch","err","console","log","add","removeHandle","removeConfirm","_this2","remove","mrremove","Velocity","document","querySelectorAll","marginLeft","duration","splice","startTouch","e","goodsIndex","changedTouches","clientX","i","n","endTouch","temp","easing","removeSelf","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","reject","axios","post","status","location","href"],"mappings":"gGAEA,IACIA,GAEFC,SAAU,iBACVC,OAAQ,eAERC,SAAU,mBACVC,UAAW,gBACXC,SAAU,mBACVC,YAAa,cAEbC,MAAO,gBAEPC,UAAW,YACXC,QAAS,WACTC,WAAY,cACZC,aAAc,gBACdC,WAAY,cAEZC,YAAa,eACbC,WAAY,cACZC,cAAe,iBACfC,cAAe,iBACfC,kBAAmB,sBAGrB,IAAK,IAAIC,KAAOlB,EACdA,EAAIkB,GA3BK,yCA2BSlB,EAAIkB,GAGTlB,yQCNAmB,yFApBX,OAAOC,YAAMpB,IAAIQ,uCAGRa,GACT,OAAOD,YAAMpB,IAAIS,QAASa,IAAGC,WAAYF,KAAIG,OAAQ,oCAGzCH,GACZ,OAAOD,YAAMpB,IAAIU,WAAYY,IAAGC,WAAYF,KAAIG,QAAS,oCAG7CH,GACZ,OAAOD,YAAMpB,IAAIY,WAAYU,IAAGC,WAAYF,yCAG9BI,GACd,OAAOL,YAAMpB,IAAIW,aAAcW,IAAGC,UAAUE,aCdjCC,EAAA,YAAIC,WACjBC,GAAI,OACJC,MACErB,UAAW,KACXsB,QAAQ,EACRC,WAAY,KACZC,aAAc,EACdC,aAAa,EACbC,YAAa,EACbC,YAAa,EACbC,KAAM,OAERC,QAZqB,WAanBC,KAAKC,gBAEPC,UACEC,UACEC,IADQ,WAEN,SAAIJ,KAAK9B,YAAa8B,KAAK9B,UAAUmC,SAC5BL,KAAK9B,UAAUoC,MAAM,SAAAC,GAC1B,OAAOA,EAAKC,WAKlBC,IATQ,SASJC,GACFV,KAAK9B,UAAUyC,QAAQ,SAAAJ,GACrBA,EAAKC,QAAUE,EACfH,EAAKK,UAAUD,QAAQ,SAAAE,GACrBA,EAAKL,QAAUE,QAKvBI,WAnBQ,WAoBN,IAAIC,KAUJ,OATIf,KAAK9B,WAAa8B,KAAK9B,UAAUmC,QACnCL,KAAK9B,UAAUyC,QAAQ,SAAAJ,GACrBA,EAAKK,UAAUD,QAAQ,SAAAE,GACjBA,EAAKL,SACPO,EAAIC,KAAKH,OAKVE,GAETE,aACEb,IADW,WAET,IAAIW,KAUJ,OATIf,KAAK9B,WAAa8B,KAAK9B,UAAUmC,QACnCL,KAAK9B,UAAUyC,QAAQ,SAAAJ,GACrBA,EAAKK,UAAUD,QAAQ,SAAAE,GACjBA,EAAKK,SACPH,EAAIC,KAAKH,OAKVE,GAETN,IAdW,cAkBbU,SAlDQ,WAmDN,IAAIC,EAAQ,EAMZ,OALIpB,KAAKqB,aAAerB,KAAKqB,YAAYhB,QACvCL,KAAKqB,YAAYV,QAAQ,SAAAE,GACvBO,GAASP,EAAKS,MAAQT,EAAK3B,SAGxBkC,GAETG,UA3DQ,WA4DN,OAAIvB,KAAKiB,YAAYZ,OAAS,EAC5B,SAAgBL,KAAKiB,YAAYZ,OAAjC,UAEO,eAIbmB,SACEvB,aADO,WACQ,IAAAwB,EAAAzB,KACbnB,EAAK6C,UAAUC,KAAK,SAAAC,GAClB,IAAIC,EAAOD,EAAIrC,KAAKuC,SACpBD,EAAKlB,QAAQ,SAAAJ,GACXA,EAAKC,SAAU,EACfD,EAAKf,QAAS,EACde,EAAKwB,QAAU,KACfxB,EAAKW,SAAU,EACfX,EAAKK,UAAUD,QAAQ,SAAAE,GACrBA,EAAKL,SAAU,EACfK,EAAKK,SAAU,MAGnBO,EAAKvD,UAAY2D,KAGrBG,WAjBO,SAiBIC,EAAOC,GAChBlC,KAAKP,WAAawC,EAClBjC,KAAKN,YAAcwC,EACnBD,EAAMzC,QAAUyC,EAAMzC,OACtBQ,KAAKR,QAAUQ,KAAKR,OACpBQ,KAAK9B,UAAUyC,QAAQ,SAAAJ,GACrBA,EAAKwB,QAAUE,EAAMzC,OAAS,GAAK,KACnCyC,EAAMF,QAAUE,EAAMzC,OAAS,KAAO,KACtCyC,EAAMf,SAAU,EAChBX,EAAKK,UAAUD,QAAQ,SAAAE,GACrBA,EAAKK,SAAU,OAIrBiB,aA/BO,SA+BMlE,EAAOgE,GAClBhE,EAAMuC,SAAWvC,EAAMuC,SACD,IAAlByB,EAAMzB,QACRyB,EAAMzB,SAAU,GAEhByB,EAAMzB,SAAU,EAChByB,EAAMrB,UAAUD,QAAQ,SAAAE,IACD,IAAjBA,EAAKL,UACPyB,EAAMzB,SAAU,OAKxB4B,aA5CO,SA4CMH,GACXA,EAAMzB,SAAWyB,EAAMzB,QACvByB,EAAMrB,UAAUD,QAAQ,SAAAE,GACtBA,EAAKL,QAAUyB,EAAMzB,WAGzB6B,WAlDO,WAmDLrC,KAAKG,UAAYH,KAAKG,UAExBmC,aArDO,SAqDMrE,EAAOgE,GAClBhE,EAAMiD,SAAWjD,EAAMiD,QACvB,IAAIqB,EAAaN,EAAMrB,UAAUN,MAAM,SAAAO,GACrC,OAAOA,EAAKK,UAGZe,EAAMf,UADJqB,GAMNC,aAhEO,SAgEMP,GACXA,EAAMf,SAAWe,EAAMf,QAEvBe,EAAMrB,UAAUD,QAAQ,SAAAE,GACtBA,EAAKK,QAAUe,EAAMf,WAIzBuB,OAxEO,SAwEAxE,GACLY,EAAK4D,OAAOxE,EAAMc,IAAI4C,KAAK,SAAAC,GACzB3D,EAAMiB,QAAU,EACZjB,EAAMiB,QAAU,IAClBjB,EAAMiB,OAAS,KAEhBwD,MAAM,SAAAC,GACPC,QAAQC,IAAIF,MAGhBG,IAlFO,SAkFH7E,GACFY,EAAKiE,IAAI7E,EAAMc,IAAI4C,KAAK,SAAAC,GACtB3D,EAAMiB,QAAU,IACfwD,MAAM,SAAAC,GACPC,QAAQC,IAAIF,MAGhBI,aAzFO,WA0FL/C,KAAKL,aAAc,GAErBqD,cA5FO,WA4FS,IAAAC,EAAAjD,KACd,GAAgC,IAA5BA,KAAKiB,YAAYZ,OACnBxB,EAAKqE,OAAOlD,KAAKiB,YAAY,GAAGlC,IAAI4C,KAAK,SAAAC,GACvCqB,EAAKC,eAEF,CACL,IAAI/D,KACJa,KAAKiB,YAAYN,QAAQ,SAAAE,GACvB1B,EAAI6B,KAAKH,EAAK9B,MAEhBF,EAAKsE,SAAShE,GAAKwC,KAAK,SAAAC,GACtBqB,EAAKC,WACJR,MAAM,SAAAC,GAASC,QAAQC,IAAIF,KAGhCS,IAASC,SAASC,iBAAiB,WACjCC,WAAY,QAEVC,SAAU,KAGhBN,OAjHO,WAkHL,IAAInC,KACJf,KAAKP,WAAWmB,UAAUD,QAAQ,SAAAE,GAC3BA,EAAKK,SACRH,EAAIC,KAAKH,KAGbb,KAAKP,WAAWmB,UAAYG,EACvBA,EAAIV,QACPL,KAAK9B,UAAUuF,OAAOzD,KAAKN,YAAa,GAE1CM,KAAKR,QAAS,EACdQ,KAAKP,WAAWD,QAAS,EACzBQ,KAAKL,aAAc,EACnBK,KAAK9B,UAAUyC,QAAQ,SAAAJ,GACrBA,EAAKwB,QAAU,QAGnB2B,WAnIO,SAmIIC,EAAGC,EAAY1B,GACxBlC,KAAKH,YAAc,EACnBG,KAAKJ,YAAc+D,EAAEE,eAAe,GAAGC,QACvC,IAAK,IAAIC,EAAI,EAAGA,EAAI7B,EAAW6B,IAC7B/D,KAAKH,YAAcG,KAAK9B,UAAU6F,GAAGnD,UAAUP,OAEjD,IAAK,IAAI2D,EAAI,EAAGA,GAAKJ,EAAYI,IAC/BhE,KAAKH,cAGToE,SA7IO,SA6IEN,GACP,IAAIO,EAAOlE,KAAKJ,YAAc+D,EAAEE,eAAe,GAAGC,QAE9CI,EAAO,GACTlE,KAAKF,KAAO,QACHoE,GAAQ,KACjBlE,KAAKF,KAAO,OAGdsD,IAASC,SAASC,iBAAiB,UAAUtD,KAAKH,aAChD0D,WAAYvD,KAAKF,OAEf0D,SAAU,IACVW,OAAQ,WAGdC,WA7JO,SA6JInC,EAAOC,EAAWjE,EAAO2F,GAClC5D,KAAKiB,YAAYD,KAAK/C,GACtB+B,KAAKP,WAAawC,EAClBjC,KAAKN,YAAcwC,EACnBjE,EAAMiD,SAAU,EAChBlB,KAAK+C,gHC1OIjE,IAff,SAAepB,EAAI6B,GACjB,OAAO,IAAI8E,EAAAC,EAAQ,SAACC,EAAQC,GAC1BC,IAAMC,KAAKhH,EAAI6B,GAAMoC,KAAK,SAAAC,GACxB,IAAI+C,EAAS/C,EAAI+C,OACH,MAAXA,EACDJ,EAAQ3C,GACU,MAAX+C,IACPC,SAASC,KAAO,gBAEjBnC,MAAM,SAAAC,GACP6B,EAAO7B","file":"static/js/cart.76e7cee3e2d4f6f3d0d5.js","sourcesContent":["// var host = 'http://rap2api.taobao.org/app/mock/7058/'\r\n// var host = 'http://rap2api.taobao.org/app/mock/177712/'\r\nvar host = 'http://yapi.demo.qunar.com/mock/69353/'\r\nvar url = {\r\n  // 首页\r\n  hotLists: 'index/hotLists',\r\n  banner: 'index/banner',\r\n  // 分类页\r\n  topLists: 'category/topList',\r\n  rankLists: 'category/rank',\r\n  subLists: 'category/subList',\r\n  searchLists: 'search/list',\r\n  // 商品详情页\r\n  goods: 'goods/details',\r\n  // 购物车\r\n  cartLists: 'cart/list',\r\n  cartAdd: 'cart/add',\r\n  cartReduce: 'cart/reduce',\r\n  cartMrremove: 'cart/mrremove',\r\n  cartRemove: 'cart/remove',\r\n  //个人地址\r\n  addressList: 'address/list',\r\n  addressAdd: 'address/add',\r\n  addressRemove: 'address/remove',\r\n  addressUpdate: 'address/update',\r\n  addressSetDefault: 'address/setDefault'\r\n\r\n}\r\nfor (var key in url) {\r\n  url[key] = host + url[key]\r\n}\r\n\r\nexport default url\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import fetch from './fetch.js'\r\nimport url from './api.js'\r\nimport qs from 'qs'\r\n\r\nclass Cart {\r\n  static getList(){\r\n    return fetch(url.cartLists)\r\n  }\r\n\r\n  static add(id) {\r\n    return fetch(url.cartAdd, qs.stringify({ id, number: 1 }))\r\n  }\r\n\r\n  static reduce(id) {\r\n    return fetch(url.cartReduce, qs.stringify({ id, number: -1 }))\r\n  }\r\n\r\n  static remove(id) {\r\n    return fetch(url.cartRemove, qs.stringify({ id }))\r\n  }\r\n\r\n  static mrremove(ids) {\r\n    return fetch(url.cartMrremove, qs.stringify(ids))\r\n  }\r\n}\r\n\r\nexport default Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js","import './cart_base.css'\r\nimport './cart_trade.css'\r\nimport './cart.css'\r\n\r\nimport Vue from 'vue'\r\nimport Velocity from 'velocity-animate'\r\nimport Cart from '@/modules/js/cartService.js'\r\n\r\nexport default new Vue({\r\n  el: '#app',\r\n  data: {\r\n    cartLists: null,\r\n    edited: false,\r\n    editedShop: null,\r\n    editedIndex: -1,\r\n    removePopup: false,\r\n    touchStartX: 0,\r\n    touchIndex: -1,\r\n    left: '0px'\r\n  },\r\n  created() {\r\n    this.getCartLists()\r\n  },\r\n  computed: {\r\n    allcheck: {\r\n      get() {\r\n        if (this.cartLists && this.cartLists.length) {\r\n          return this.cartLists.every(shop => {\r\n            return shop.checked\r\n          })\r\n        }\r\n        return false\r\n      },\r\n      set(newVal) {\r\n        this.cartLists.forEach(shop => {\r\n          shop.checked = newVal\r\n          shop.goodsList.forEach(good => {\r\n            good.checked = newVal\r\n          })\r\n        })\r\n      }\r\n    },\r\n    checkLists() {\r\n      let arr = []\r\n      if (this.cartLists && this.cartLists.length) {\r\n        this.cartLists.forEach(shop => {\r\n          shop.goodsList.forEach(good => {\r\n            if (good.checked) {\r\n              arr.push(good)\r\n            }\r\n          })\r\n        })\r\n      }\r\n      return arr\r\n    },\r\n    removeLists: {\r\n      get() {\r\n        let arr = []\r\n        if (this.cartLists && this.cartLists.length) {\r\n          this.cartLists.forEach(shop => {\r\n            shop.goodsList.forEach(good => {\r\n              if (good.removed) {\r\n                arr.push(good)\r\n              }\r\n            })\r\n          })\r\n        }\r\n        return arr\r\n      },\r\n      set() {\r\n\r\n      }\r\n    },\r\n    getTotal() {\r\n      var total = 0\r\n      if (this.selectLists && this.selectLists.length) {\r\n        this.selectLists.forEach(good => {\r\n          total += good.price * good.number\r\n        })\r\n      }\r\n      return total\r\n    },\r\n    removeMsg() {\r\n      if (this.removeLists.length > 1) {\r\n        return `确定将所选 ${this.removeLists.length} 个商品删除？`\r\n      } else {\r\n        return '确定要删除该商品吗？'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCartLists() {\r\n      Cart.getList().then(res => {\r\n        var list = res.data.cartList\r\n        list.forEach(shop => {\r\n          shop.checked = false\r\n          shop.edited = false\r\n          shop.editMsg = '编辑'\r\n          shop.removed = false\r\n          shop.goodsList.forEach(good => {\r\n            good.checked = false\r\n            good.removed = false\r\n          })\r\n        });\r\n        this.cartLists = list\r\n      })\r\n    },\r\n    handleEdit(shops, shopIndex) {\r\n      this.editedShop = shops\r\n      this.editedIndex = shopIndex\r\n      shops.edited = !shops.edited\r\n      this.edited = !this.edited\r\n      this.cartLists.forEach(shop => {\r\n        shop.editMsg = shops.edited ? '' : '编辑'\r\n        shops.editMsg = shops.edited ? '完成' : '编辑'\r\n        shops.removed = false\r\n        shop.goodsList.forEach(good => {\r\n          good.removed = false\r\n        })\r\n      })\r\n    },\r\n    goodsChecked(goods, shops) {\r\n      goods.checked = !goods.checked\r\n      if (shops.checked === true) {\r\n        shops.checked = false\r\n      } else {\r\n        shops.checked = true\r\n        shops.goodsList.forEach(good => {\r\n          if (good.checked === false) {\r\n            shops.checked = false\r\n          }\r\n        })\r\n      }\r\n    },\r\n    shopsChecked(shops) {\r\n      shops.checked = !shops.checked\r\n      shops.goodsList.forEach(good => {\r\n        good.checked = shops.checked\r\n      })\r\n    },\r\n    allChecked() {\r\n      this.allcheck = !this.allcheck\r\n    },\r\n    goodsRemoved(goods, shops) {\r\n      goods.removed = !goods.removed\r\n      var allRemoved = shops.goodsList.every(good => {\r\n        return good.removed\r\n      })\r\n      if (allRemoved) {\r\n        shops.removed = true\r\n      } else {\r\n        shops.removed = false\r\n      }\r\n    },\r\n    shopsRemoved(shops) {\r\n      shops.removed = !shops.removed\r\n\r\n      shops.goodsList.forEach(good => {\r\n        good.removed = shops.removed\r\n      })\r\n\r\n    },\r\n    reduce(goods) {\r\n      Cart.reduce(goods.id).then(res => {\r\n        goods.number -= 1\r\n        if (goods.number <= 1) {\r\n          goods.number = 1\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    add(goods) {\r\n      Cart.add(goods.id).then(res => {\r\n        goods.number += 1\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    removeHandle() {\r\n      this.removePopup = true\r\n    },\r\n    removeConfirm() {\r\n      if (this.removeLists.length === 1) {\r\n        Cart.remove(this.removeLists[0].id).then(res => {\r\n          this.remove()\r\n        })\r\n      } else {\r\n        let ids = []\r\n        this.removeLists.forEach(good => {\r\n          ids.push(good.id)\r\n        })\r\n        Cart.mrremove(ids).then(res => {\r\n          this.remove()\r\n        }).catch(err => { console.log(err) })\r\n      }\r\n\r\n      Velocity(document.querySelectorAll('.touch'), {\r\n        marginLeft: '0px'\r\n      }, {\r\n          duration: 0,\r\n        });\r\n    },\r\n    remove() {\r\n      let arr = []\r\n      this.editedShop.goodsList.forEach(good => {\r\n        if (!good.removed) {\r\n          arr.push(good)\r\n        }\r\n      })\r\n      this.editedShop.goodsList = arr\r\n      if (!arr.length) {\r\n        this.cartLists.splice(this.editedIndex, 1)\r\n      }\r\n      this.edited = false\r\n      this.editedShop.edited = false\r\n      this.removePopup = false\r\n      this.cartLists.forEach(shop => {\r\n        shop.editMsg = '编辑'\r\n      })\r\n    },\r\n    startTouch(e, goodsIndex, shopIndex) {\r\n      this.touchIndex = -1\r\n      this.touchStartX = e.changedTouches[0].clientX\r\n      for (var i = 0; i < shopIndex; i++) {\r\n        this.touchIndex += this.cartLists[i].goodsList.length\r\n      }\r\n      for (var n = 0; n <= goodsIndex; n++) {\r\n        this.touchIndex++\r\n      }\r\n    },\r\n    endTouch(e) {\r\n      let temp = this.touchStartX - e.changedTouches[0].clientX\r\n\r\n      if (temp > 30) {\r\n        this.left = '-75px'\r\n      } else if (temp < -30) {\r\n        this.left = '0px'\r\n      }\r\n\r\n      Velocity(document.querySelectorAll('.touch')[this.touchIndex], {\r\n        marginLeft: this.left\r\n      }, {\r\n          duration: 700,\r\n          easing: \"swing\"\r\n        });\r\n    },\r\n    removeSelf(shops, shopIndex, goods, goodsIndex) {\r\n      this.removeLists.push(goods)\r\n      this.editedShop = shops\r\n      this.editedIndex = shopIndex\r\n      goods.removed = true\r\n      this.removeHandle()\r\n    }\r\n  }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import Vue from 'vue'\r\nimport axios from 'axios'\r\n\r\nfunction fetch(url,data){\r\n  return new Promise((resolve,reject)=>{\r\n    axios.post(url,data).then(res=>{\r\n      let status = res.status\r\n      if(status === 200){\r\n        resolve(res)\r\n      }else if(status === 300){\r\n        location.href = 'index.html'\r\n      }\r\n    }).catch(err=>{\r\n      reject(err)\r\n    })\r\n  })\r\n}\r\n\r\nexport default fetch\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js"],"sourceRoot":""}